
NOTE : although repository building is mostly independend of mirroring, this
       document assumes you are familiar with the available documentation
       for repomirror.


Configuration files follow the same rules than those for repomirror. They are
ini-style, there is a main one and can be hosted under a .d subdirectory.


The only variable expected in the global section is 'destdir', which has
a similar meaning than for repomirror, and points to the parent directory
of those containing the packages. The directory actually searched for
packages is built by concatenating the repository name to this toplevel
directory.

If repositories are going to be served using apache, some extra entries are
required on the global section. The keywords webconf and weburi are required
to generate the apache configuration, and point to the value of ServerRoot and
to the path prefix that will be used to access the repositories. If cache class
repositories are going to be used, it is also required to supply webuser, which
is the username than webserver run as. Defatuls are sensible for debian systems
where only weburi should be needed if default value '/mirror' needs to be
modified.


Definitions of build repositories currently allow much less keywords than
repomirror does. The most important keyword is 'type', and defines the kind
of repository to be built. Three repository types are implemented:
 - feed - creates an OpenWrt feed repository (indexes ipk & opk files)
 - deb  - will create a 'simple' debian repository, only with Packages file
          (only differs from feed in the indexed extensions)
 - yum  - builds a yum compatible repository using createrepo
 - apt  - builds an apt repository, from a populated pool tree

Keyword 'version' is also required, although is currently unused.

If 'destdir' is used within the repository definition, it sets the full path
for package search, without appending repository name. Other optional keyword
for deb & feed repositories is 'extensions', which overrides the default file
extensions indexed.

apt repositories required two additional keywords, to define which architectures
and components will be included.


A sample repo building configuration is shown below

[global]
destdir = /home/repomirror

[mybook-oe]
type = feed
version = 1.18

[javiplx]
destdir = /home/in-house/javiplx
type = apt
version = test
architectures = i386 amd64
components = main contrib

